{"version":3,"file":"js/849.js","mappings":"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","sources":["webpack://chronicle/./src/components/DragAndDropManager.vue","webpack://chronicle/./src/components/DragAndDropManager.vue?669d","webpack://chronicle/./src/components/DragAndDropManager.vue?2a08","webpack://chronicle/./src/components/DragAndDropManager.vue?905e","webpack://chronicle/./src/views/applets/NormMapa.vue","webpack://chronicle/src/views/applets/NormMapa.vue","webpack://chronicle/./src/views/applets/NormMapa.vue?288c","webpack://chronicle/./src/views/applets/NormMapa.vue?5e41"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"drag-and-drop-manager\",on:{\"dragenter\":function($event){$event.preventDefault();return _vm._handle_dragenter.apply(null, arguments)},\"dragover\":function($event){$event.preventDefault();return _vm._handle_dragover.apply(null, arguments)},\"drop\":function($event){$event.preventDefault();return _vm._handle_drop.apply(null, arguments)}}},[(_vm.show_tooltip)?_c('p',{staticClass:\"drag-and-drop-tooltop\"},[_vm._v(_vm._s(_vm.message))]):_vm._e(),(!_vm.is_mobile)?_c('div',{staticClass:\"drop-target\",class:{ dragging: _vm.dragging }},[(_vm.dragging)?_c('p',[_vm._v(_vm._s(_vm.message))]):_vm._e()]):_vm._e(),_c('input',{ref:\"fileInput\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":_vm.mime},on:{\"change\":_vm._handle_file_input_change}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n\r\nimport mixins from 'vue-typed-mixins';\r\nimport BaseComponent from './BaseComponent.vue';\r\n\r\nexport enum EMimeTypes {\r\n    Image = \"image/*\",\r\n    Video = \"video/*\",\r\n    Audio = \"audio/*\",\r\n    Text = \"text/*\",\r\n    Application = \"application/*\",\r\n    GltfGlb = \"model/gltf-binary\",\r\n    Any = \"*/*\",\r\n}\r\n\r\nexport default mixins(BaseComponent).extend({\r\n    name: 'DragAndDropManager',\r\n    data() {\r\n        return {\r\n            dragging: false,\r\n        }\r\n    },\r\n    props: {\r\n        mime: {\r\n            type: String,\r\n            default: EMimeTypes.Any\r\n        },\r\n        message: {\r\n            type: String,\r\n            default: \"Drag and drop an files here\"\r\n        },\r\n        on_file: Function,\r\n        on_files: Function,\r\n        show_tooltip: {\r\n            type: Boolean,\r\n            default: true\r\n        }\r\n\r\n    },\r\n    mounted() {\r\n        this._handle_paste = this._handle_paste.bind(this);\r\n        document.addEventListener('paste', this._handle_paste);\r\n    },\r\n    beforeDestroy() {\r\n        document.removeEventListener('paste', this._handle_paste);\r\n    },\r\n    methods: {\r\n        _handle_files(files: File[]) {\r\n            if (files.length > 0) {\r\n                if (this.on_file) {\r\n                    this.on_file(files[0]);\r\n                }\r\n                if (this.on_files) {\r\n                    this.on_files(files);\r\n                }\r\n            }\r\n        },\r\n        async _handle_file_input_change(event) {\r\n            this._handle_files(event.target.files);\r\n\r\n        },\r\n        async _handle_drop(event) {\r\n            event.preventDefault();\r\n            this.dragging = false;\r\n            this._handle_files(event.dataTransfer.files)\r\n        },\r\n        _handle_paste(event) {\r\n            let items = (event.clipboardData).items;\r\n            for (let index in items) {\r\n                let item = items[index];\r\n                \r\n                if (item.kind === 'file') {\r\n                    let blob = item.getAsFile();\r\n                    this.on_file(blob)\r\n                }\r\n            }\r\n        },\r\n        // New method to handle dragenter event\r\n        _handle_dragenter(event) {\r\n            this.dragging = true;\r\n            event.preventDefault();\r\n        },\r\n\r\n        // New method to handle dragover event\r\n        _handle_dragover(event) {\r\n            event.preventDefault();\r\n        }\r\n\r\n    }\r\n});\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DragAndDropManager.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DragAndDropManager.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DragAndDropManager.vue?vue&type=template&id=9506712e&\"\nimport script from \"./DragAndDropManager.vue?vue&type=script&lang=ts&\"\nexport * from \"./DragAndDropManager.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DragAndDropManager.vue?vue&type=style&index=0&id=9506712e&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"norm-mapa\",class:{ mobile: _vm.is_mobile }},[_c('div',{staticClass:\"control-panel\"},[_c('Tweakpane',{ref:\"tweakpane\"})],1),_c('div',{staticClass:\"rendering-area\"},[_c('ShaderView',{ref:\"shader_view\",attrs:{\"force_width\":_vm.renderer_width,\"force_height\":_vm.renderer_height,\"shader_id\":\"norm_mapa\",\"show_controls\":false},on:{\"ready\":_vm.update}}),_c('DragAndDropManager',{attrs:{\"mime\":_vm.EMimeTypes.Image,\"on_file\":_vm._handle_file_upload}}),_c('input',{ref:\"fileInput\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.handle_open_file}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div :class=\"{ mobile: is_mobile }\" class=\"norm-mapa\">\r\n        <div class=\"control-panel\">\r\n            <Tweakpane ref=\"tweakpane\"></Tweakpane>\r\n        </div>\r\n        <div class=\"rendering-area\">\r\n            <ShaderView :force_width=\"renderer_width\" :force_height=\"renderer_height\" ref=\"shader_view\"\r\n                shader_id=\"norm_mapa\" :show_controls=\"false\" @ready=\"update\" />\r\n            <DragAndDropManager :mime=\"EMimeTypes.Image\" :on_file=\"_handle_file_upload\" />\r\n            <input type=\"file\" accept=\"image/*\" @change=\"handle_open_file\" style=\"display: none\" ref=\"fileInput\" />\r\n        </div>\r\n    </div>\r\n    <!-- Other components and UI elements -->\r\n</div></template>\r\n  \r\n<script>\r\n\r\nimport * as THREE from 'three';\r\nimport mixins from 'vue-typed-mixins'\r\nimport ThreeRenderer from '../../components/ThreeRenderer.vue';\r\nimport Tweakpane from '@/components/Tweakpane.vue';\r\nimport DragAndDropManager, { EMimeTypes } from '@/components/DragAndDropManager.vue';\r\nimport BaseComponent from '@/components/BaseComponent.vue';\r\nimport { load_texture, read_text_file, create_shader_material } from '@/tools';\r\nimport { shaders } from '@/router/index'\r\n\r\nconst samples = [\r\n    'assets/image/planet.png',\r\n    'assets/image/moon.png',\r\n    'assets/image/clock.png',\r\n    'assets/image/pattern.png',\r\n]\r\n\r\nexport default mixins(BaseComponent).extend({\r\n    name: 'NormMapa',\r\n    components: {\r\n        ThreeRenderer,\r\n        Tweakpane,\r\n        DragAndDropManager\r\n    },\r\n    data() {\r\n        return {\r\n            EMimeTypes,\r\n            step_scale: 1.5,\r\n            iterations: 2,\r\n            heightmap_contrast: 2,\r\n            heightmap_brightness: 6,\r\n            alpha_level: 0,\r\n            use_radial_kernel: true,\r\n            apply_transformations_to_alpha: false,\r\n            dragging: false,\r\n            invert_heightmap: false,\r\n            invert_alpha: false,\r\n            use_directx_format: false,\r\n            download_image_name: 'rendered_frame',\r\n            prev_pointer_position: { x: 0, y: 0 },\r\n            grid: true,\r\n            texture_offset: new THREE.Vector2(0, 0),\r\n            texture_scale: new THREE.Vector2(1, 1),\r\n            renderer_width: 100,\r\n            renderer_height: 100,\r\n            preview_mode: false,\r\n        };\r\n    },\r\n    computed: {\r\n        image_size_formatted() {\r\n            return `${this.renderer_width}x${this.renderer_height}`\r\n        }\r\n    },\r\n    props: {\r\n        image: {\r\n            type: String,\r\n            default: '',\r\n        },\r\n    },\r\n    mounted() {\r\n        this.init()\r\n        this.setup_tweakpane()\r\n    },\r\n    beforeDestroy() {\r\n\r\n    },\r\n    methods: {\r\n        async init() {\r\n            var image = this.image\r\n\r\n            if (image === 'sample') {\r\n                await this.load_texture(\"assets/image/moon_heightmap.png\")\r\n            } else {\r\n                await this.load_texture(image)\r\n            }\r\n\r\n        },\r\n        set_texture(texture) {\r\n            this.texture = texture;\r\n            // tiling mirrored\r\n            this.texture.wrapS = THREE.MirroredRepeatWrapping;\r\n            this.texture.wrapT = THREE.MirroredRepeatWrapping;\r\n\r\n            this.renderer_width = texture.image.width;\r\n            this.renderer_height = texture.image.height;\r\n            this.update_route({\r\n                image: texture.image.src\r\n            })\r\n\r\n            this.preview_mode = false\r\n            this.update()\r\n        },\r\n        update() {\r\n            if (this.$refs.shader_view && this.$refs.shader_view.material) {\r\n                if (this.texture) {\r\n                    this.$refs.shader_view.material.uniforms.u_map.value = this.texture;\r\n                    this.$refs.shader_view.material.uniforms.u_map.needsUpdate = true;\r\n                }\r\n\r\n                this.$refs.shader_view.material.uniforms.u_directx.value = this.use_directx_format ? 1 : 0\r\n                this.$refs.shader_view.material.uniforms.u_scale.value = this.step_scale\r\n                this.$refs.shader_view.material.uniforms.u_invert_height.value = this.invert_heightmap\r\n                this.$refs.shader_view.material.uniforms.u_iterations.value = this.iterations\r\n                this.$refs.shader_view.material.uniforms.u_contrast.value = this.heightmap_contrast\r\n                this.$refs.shader_view.material.uniforms.u_brightness.value = this.heightmap_brightness\r\n                this.$refs.shader_view.material.uniforms.u_preview.value = this.preview_mode ? 1 : 0\r\n                this.$refs.shader_view.material.uniforms.u_alpha_level.value = this.alpha_level\r\n                this.$refs.shader_view.material.uniforms.u_invert_alpha.value = this.invert_alpha\r\n                this.$refs.shader_view.material.uniforms.u_alpha_apply.value = this.apply_transformations_to_alpha\r\n                this.$refs.shader_view.material.uniforms.u_radial_kernel.value = this.use_radial_kernel ? 1 : 0\r\n            }\r\n        },\r\n        async load_texture(src) {\r\n            return new Promise((resolve, reject) => {\r\n                this.download_image_name = this.get_file_name(src)\r\n                let loader = new THREE.TextureLoader();\r\n                loader.load(src, (texture) => {\r\n                    console.log(\"Loaded texture\", texture);\r\n                    this.set_texture(texture)\r\n                    resolve(texture);\r\n                });\r\n            })\r\n        },\r\n        open_file() {\r\n            this.$refs.fileInput.click();\r\n        },\r\n        async _handle_file_upload(file) {\r\n            this.download_image_name = this.get_file_name(file.name)\r\n            let url = URL.createObjectURL(file);\r\n            let texture = await load_texture(url);\r\n\r\n            this.set_texture(texture)\r\n        },\r\n        async handle_open_file(event) {\r\n            const file = event.target.files[0];\r\n            this._handle_file_upload(file);\r\n        },\r\n        remove_extension(filename) {\r\n            return filename.replace(/\\.[^/.]+$/, \"\");\r\n        },\r\n        get_file_name(path) {\r\n            return this.remove_extension(path.split('\\\\').pop().split('/').pop());\r\n        },\r\n        setup_tweakpane() {\r\n            let pane = this.$refs.tweakpane.pane;\r\n\r\n            pane.addButton({\r\n                title: 'Toggle View',\r\n            }).on('click', () => {\r\n                this.preview_mode = !this.preview_mode\r\n                this.update()\r\n            });\r\n\r\n\r\n            pane.addBlade({\r\n                view: 'separator',\r\n            });\r\n\r\n            pane.addBinding(this, 'step_scale', {\r\n                label: 'Step Scale',\r\n                min: 0.01,\r\n                max: 10,\r\n                step: 0.001,\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n\r\n            pane.addBinding(this, 'iterations', {\r\n                label: 'Iterations',\r\n                min: 1,\r\n                max: 5,\r\n                step: 1,\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n\r\n            pane.addBinding(this, 'use_radial_kernel', {\r\n                label: 'Radial Kernel',\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n\r\n            pane.addBlade({\r\n                view: 'separator',\r\n            });\r\n\r\n            pane.addBinding(this, 'heightmap_contrast', {\r\n                label: 'Contrast',\r\n                min: 0.01,\r\n                max: 4,\r\n                step: 0.1,\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n\r\n            pane.addBinding(this, 'heightmap_brightness', {\r\n                label: 'Brightness',\r\n                min: 0.1,\r\n                max: 32,\r\n                step: 0.1,\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n\r\n          \r\n            pane.addBinding(this, 'invert_heightmap', {\r\n                label: 'Invert Heightmap',\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n\r\n            let alpha_settings = pane.addFolder({\r\n                title: 'Alpha Control',\r\n                expanded: false,\r\n            });\r\n\r\n            alpha_settings.addBinding(this, 'alpha_level', {\r\n                label: 'Alpha Level',\r\n                min: 0,\r\n                max: 1,\r\n                step: 1,\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n\r\n            alpha_settings.addBinding(this, 'invert_alpha', {\r\n                label: 'Invert Alpha',\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n            \r\n            alpha_settings.addBinding(this, 'apply_transformations_to_alpha', {\r\n                label: 'Apply Transformations to Alpha',\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n\r\n\r\n\r\n            pane.addBinding(this, 'use_directx_format', {\r\n                label: 'DirectX Format',\r\n            }).on('change', ({ value }) => {\r\n                this.update()\r\n            })\r\n\r\n            pane.addBlade({\r\n                view: 'separator',\r\n            });\r\n\r\n\r\n            pane.addButton({\r\n                title: 'Open File',\r\n            }).on('click', () => {\r\n                this.open_file()\r\n            });\r\n\r\n            pane.addBlade({\r\n                view: 'separator',\r\n            });\r\n\r\n\r\n            pane.addButton({\r\n                title: 'Download as Image',\r\n            }).on('click', () => {\r\n                this.preview_mode = false\r\n                this.update()\r\n                setTimeout(() => {\r\n                    this.$refs.shader_view.renderer.save_as_image(this.download_image_name)\r\n                }, 200);\r\n            });\r\n\r\n            pane.addBinding(this, 'download_image_name', {\r\n                label: '',\r\n                readonly: true,\r\n            });\r\n\r\n            pane.addBlade({\r\n                view: 'separator',\r\n            });\r\n\r\n            pane.addBinding(this, 'image_size_formatted', {\r\n                label: 'Image Size',\r\n                readonly: true,\r\n            });\r\n\r\n        },\r\n    },\r\n});\r\n</script>\r\n<style lang=\"less\">\r\n@import url('@/assets/index.less');\r\n\r\n.norm-mapa {\r\n    padding: 0;\r\n    display: grid;\r\n    grid-template-columns: 240px 1fr;\r\n    grid-template-rows: 1fr;\r\n    overflow: hidden;\r\n\r\n    .control-panel {\r\n        padding: 8px;\r\n    }\r\n\r\n    .rendering-area {\r\n        position: relative;\r\n        width: 100%;\r\n        height: 100%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        overflow: hidden;\r\n        padding: 8px;\r\n\r\n        .shader-view {\r\n            width: 100%;\r\n            height: 100%;\r\n        }\r\n    }\r\n\r\n    &.mobile {}\r\n}\r\n\r\n@media screen and (max-width: 600px) {\r\n    .norm-mapa {\r\n        grid-template-rows: 1fr 1fr;\r\n        grid-template-columns: 1fr;\r\n        height: 100%;\r\n\r\n        .control-panel {\r\n            grid-row: 2;\r\n            overflow: auto;\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NormMapa.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NormMapa.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NormMapa.vue?vue&type=template&id=36eb80be&\"\nimport script from \"./NormMapa.vue?vue&type=script&lang=js&\"\nexport * from \"./NormMapa.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NormMapa.vue?vue&type=style&index=0&id=36eb80be&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["EMimeTypes","render","_vm","this","_c","_self","_setupProxy","staticClass","on","$event","preventDefault","_handle_dragenter","apply","arguments","_handle_dragover","_handle_drop","show_tooltip","_v","_s","message","_e","is_mobile","class","dragging","ref","staticStyle","attrs","mime","_handle_file_input_change","staticRenderFns","mixins","BaseComponent","extend","name","data","props","type","String","default","Any","on_file","Function","on_files","Boolean","mounted","_handle_paste","bind","document","addEventListener","beforeDestroy","removeEventListener","methods","_handle_files","files","length","async","event","target","dataTransfer","items","clipboardData","index","item","kind","blob","getAsFile","component","mobile","renderer_width","renderer_height","update","Image","_handle_file_upload","handle_open_file","components","ThreeRenderer","Tweakpane","DragAndDropManager","step_scale","iterations","heightmap_contrast","heightmap_brightness","alpha_level","use_radial_kernel","apply_transformations_to_alpha","invert_heightmap","invert_alpha","use_directx_format","download_image_name","prev_pointer_position","x","y","grid","texture_offset","THREE","texture_scale","preview_mode","computed","image_size_formatted","image","init","setup_tweakpane","load_texture","set_texture","texture","wrapS","wrapT","width","height","update_route","src","$refs","shader_view","material","uniforms","u_map","value","needsUpdate","u_directx","u_scale","u_invert_height","u_iterations","u_contrast","u_brightness","u_preview","u_alpha_level","u_invert_alpha","u_alpha_apply","u_radial_kernel","Promise","resolve","reject","get_file_name","loader","load","console","log","open_file","fileInput","click","file","url","URL","createObjectURL","remove_extension","filename","replace","path","split","pop","pane","tweakpane","addButton","title","addBlade","view","addBinding","label","min","max","step","alpha_settings","addFolder","expanded","setTimeout","renderer","save_as_image","readonly"],"sourceRoot":""}