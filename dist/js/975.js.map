{"version":3,"file":"js/975.js","mappings":"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","sources":["webpack://chronicle/./src/components/DragAndDropManager.vue","webpack://chronicle/./src/components/DragAndDropManager.vue?669d","webpack://chronicle/./src/components/DragAndDropManager.vue?2a08","webpack://chronicle/./src/components/DragAndDropManager.vue?905e","webpack://chronicle/./src/views/applets/NormMapa.vue","webpack://chronicle/src/views/applets/NormMapa.vue","webpack://chronicle/./src/views/applets/NormMapa.vue?288c","webpack://chronicle/./src/views/applets/NormMapa.vue?5e41"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"drag-and-drop-manager\",on:{\"dragenter\":function($event){$event.preventDefault();return _vm._handle_dragenter.apply(null, arguments)},\"dragover\":function($event){$event.preventDefault();return _vm._handle_dragover.apply(null, arguments)},\"drop\":function($event){$event.preventDefault();return _vm._handle_drop.apply(null, arguments)}}},[(_vm.show_tooltip)?_c('p',{staticClass:\"drag-and-drop-tooltop\"},[_vm._v(_vm._s(_vm.message))]):_vm._e(),(!_vm.is_mobile)?_c('div',{staticClass:\"drop-target\",class:{ dragging: _vm.dragging }},[(_vm.dragging)?_c('p',[_vm._v(_vm._s(_vm.message))]):_vm._e()]):_vm._e(),_c('input',{ref:\"fileInput\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":_vm.mime},on:{\"change\":_vm._handle_file_input_change}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n\r\nimport mixins from 'vue-typed-mixins';\r\nimport BaseComponent from './BaseComponent.vue';\r\n\r\nexport enum EMimeTypes {\r\n    Image = \"image/*\",\r\n    Video = \"video/*\",\r\n    Audio = \"audio/*\",\r\n    Text = \"text/*\",\r\n    Application = \"application/*\",\r\n    GltfGlb = \"model/gltf-binary\",\r\n    Any = \"*/*\",\r\n}\r\n\r\nexport default mixins(BaseComponent).extend({\r\n    name: 'DragAndDropManager',\r\n    data() {\r\n        return {\r\n            dragging: false,\r\n        }\r\n    },\r\n    props: {\r\n        mime: {\r\n            type: String,\r\n            default: EMimeTypes.Any\r\n        },\r\n        message: {\r\n            type: String,\r\n            default: \"Drag and drop an files here\"\r\n        },\r\n        on_file: Function,\r\n        on_files: Function,\r\n        show_tooltip: {\r\n            type: Boolean,\r\n            default: true\r\n        }\r\n\r\n    },\r\n    methods: {\r\n        _handle_files(files: File[]) {\r\n            if (files.length > 0) {\r\n                if (this.on_file) {\r\n                    this.on_file(files[0]);\r\n                }\r\n                if (this.on_files) {\r\n                    this.on_files(files);\r\n                }\r\n            }\r\n        },\r\n        async _handle_file_input_change(event) {\r\n            this._handle_files(event.target.files);\r\n\r\n        },\r\n        async _handle_drop(event) {\r\n            event.preventDefault();\r\n            this.dragging = false;\r\n            this._handle_files(event.dataTransfer.files)\r\n        },\r\n\r\n        // New method to handle dragenter event\r\n        _handle_dragenter(event) {\r\n            this.dragging = true;\r\n            event.preventDefault();\r\n        },\r\n\r\n        // New method to handle dragover event\r\n        _handle_dragover(event) {\r\n            event.preventDefault();\r\n        },\r\n\r\n\r\n    }\r\n});\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DragAndDropManager.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DragAndDropManager.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DragAndDropManager.vue?vue&type=template&id=c22317ce&\"\nimport script from \"./DragAndDropManager.vue?vue&type=script&lang=ts&\"\nexport * from \"./DragAndDropManager.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DragAndDropManager.vue?vue&type=style&index=0&id=c22317ce&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"norm-mapa\",class:{ mobile: _vm.is_mobile }},[_c('div',{staticClass:\"control-panel\"},[_c('Tweakpane',{ref:\"tweakpane\"})],1),_c('div',{staticClass:\"rendering-area\"},[_c('ShaderView',{ref:\"shader_view\",attrs:{\"force_width\":_vm.renderer_width,\"force_height\":_vm.renderer_height,\"shader_id\":\"norm_mapa\",\"show_controls\":false},on:{\"ready\":_vm.update}}),_c('DragAndDropManager',{attrs:{\"mime\":_vm.EMimeTypes.Image,\"on_file\":_vm._handle_file_upload}}),_c('input',{ref:\"fileInput\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.handle_open_file}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div :class=\"{ mobile: is_mobile }\" class=\"norm-mapa\">\r\n        <div class=\"control-panel\">\r\n            <Tweakpane ref=\"tweakpane\"></Tweakpane>\r\n        </div>\r\n        <div class=\"rendering-area\">\r\n            <ShaderView :force_width=\"renderer_width\" :force_height=\"renderer_height\" ref=\"shader_view\"\r\n                shader_id=\"norm_mapa\" :show_controls=\"false\" @ready=\"update\" />\r\n            <DragAndDropManager :mime=\"EMimeTypes.Image\" :on_file=\"_handle_file_upload\" />\r\n            <input type=\"file\" accept=\"image/*\" @change=\"handle_open_file\" style=\"display: none\" ref=\"fileInput\" />\r\n        </div>\r\n    </div>\r\n    <!-- Other components and UI elements -->\r\n</div></template>\r\n  \r\n<script>\r\n\r\nimport * as THREE from 'three';\r\nimport mixins from 'vue-typed-mixins'\r\nimport ThreeRenderer from '../../components/ThreeRenderer.vue';\r\nimport Tweakpane from '@/components/Tweakpane.vue';\r\nimport DragAndDropManager, { EMimeTypes } from '@/components/DragAndDropManager.vue';\r\nimport BaseComponent from '@/components/BaseComponent.vue';\r\nimport { load_texture, read_text_file, create_shader_material } from '@/tools';\r\nimport { shaders } from '@/router/index'\r\n\r\nconst samples = [\r\n    'assets/image/planet.png',\r\n    'assets/image/moon.png',\r\n    'assets/image/clock.png',\r\n    'assets/image/pattern.png',\r\n]\r\n\r\nexport default mixins(BaseComponent).extend({\r\n    name: 'NormMapa',\r\n    components: {\r\n        ThreeRenderer,\r\n        Tweakpane,\r\n        DragAndDropManager\r\n    },\r\n    data() {\r\n        return {\r\n            EMimeTypes,\r\n            step_scale: 1.5,\r\n            iterations: 2,\r\n            heightmap_contrast: 2,\r\n            heightmap_brightness: 6,\r\n            dragging: false,\r\n            invert_heightmap: false,\r\n            use_directx_format: false,\r\n            download_image_name: 'rendered_frame',\r\n            prev_pointer_position: { x: 0, y: 0 },\r\n            grid: true,\r\n            texture_offset: new THREE.Vector2(0, 0),\r\n            texture_scale: new THREE.Vector2(1, 1),\r\n            renderer_width: 100,\r\n            renderer_height: 100,\r\n            preview_mode: false,\r\n        };\r\n    },\r\n    computed: {\r\n        image_size_formatted() {\r\n            return `${this.renderer_width}x${this.renderer_height}`\r\n        }\r\n    },\r\n    props: {\r\n        image: {\r\n            type: String,\r\n            default: '',\r\n        },\r\n    },\r\n    mounted() {\r\n        this.init()\r\n        this.setup_tweakpane()\r\n    },\r\n    beforeDestroy() {\r\n\r\n    },\r\n    methods: {\r\n        async init() {\r\n            var image = this.image\r\n\r\n            if (image === 'sample') {\r\n                await this.load_texture(\"assets/image/moon_heightmap.png\")\r\n            } else {\r\n                await this.load_texture(image)\r\n            }\r\n\r\n        },\r\n        set_texture(texture) {\r\n            this.texture = texture;\r\n            // tiling mirrored\r\n            this.texture.wrapS = THREE.MirroredRepeatWrapping;\r\n            this.texture.wrapT = THREE.MirroredRepeatWrapping;\r\n\r\n            this.renderer_width = texture.image.width;\r\n            this.renderer_height = texture.image.height;\r\n            this.update_route({\r\n                image: texture.image.src\r\n            })\r\n\r\n            this.preview_mode = false\r\n            this.update()\r\n        },\r\n        update() {\r\n            if (this.$refs.shader_view && this.$refs.shader_view.material) {\r\n                if (this.texture) {\r\n                    this.$refs.shader_view.material.uniforms.u_map.value = this.texture;\r\n                    this.$refs.shader_view.material.uniforms.u_map.needsUpdate = true;\r\n                }\r\n\r\n                this.$refs.shader_view.material.uniforms.u_directx.value = this.use_directx_format ? 1 : 0\r\n                this.$refs.shader_view.material.uniforms.u_scale.value = this.step_scale\r\n                this.$refs.shader_view.material.uniforms.u_invert_height.value = this.invert_heightmap\r\n                this.$refs.shader_view.material.uniforms.u_iterations.value = this.iterations\r\n                this.$refs.shader_view.material.uniforms.u_contrast.value = this.heightmap_contrast\r\n                this.$refs.shader_view.material.uniforms.u_brightness.value = this.heightmap_brightness\r\n                this.$refs.shader_view.material.uniforms.u_preview.value = this.preview_mode ? 1 : 0\r\n            }\r\n        },\r\n        async load_texture(src) {\r\n            return new Promise((resolve, reject) => {\r\n                this.download_image_name = this.get_file_name(src)\r\n                let loader = new THREE.TextureLoader();\r\n                loader.load(src, (texture) => {\r\n                    console.log(\"Loaded texture\", texture);\r\n                    this.set_texture(texture)\r\n                    resolve(texture);\r\n                });\r\n            })\r\n        },\r\n        open_file() {\r\n            this.$refs.fileInput.click();\r\n        },\r\n        async _handle_file_upload(file) {\r\n            this.download_image_name = this.get_file_name(file.name)\r\n            let url = URL.createObjectURL(file);\r\n            let texture = await load_texture(url);\r\n\r\n            this.set_texture(texture)\r\n        },\r\n        async handle_open_file(event) {\r\n            const file = event.target.files[0];\r\n            this._handle_file_upload(file);\r\n        },\r\n        remove_extension(filename) {\r\n            return filename.replace(/\\.[^/.]+$/, \"\");\r\n        },\r\n        get_file_name(path) {\r\n            return this.remove_extension(path.split('\\\\').pop().split('/').pop());\r\n        },\r\n        setup_tweakpane() {\r\n            let pane = this.$refs.tweakpane.pane;\r\n\r\n            pane.addButton({\r\n                title: 'Toggle View',\r\n            }).on('click', () => {\r\n                this.preview_mode = !this.preview_mode\r\n                this.update()\r\n            });\r\n\r\n\r\n            pane.addBlade({\r\n                view: 'separator',\r\n            });\r\n\r\n            pane.addBinding(this, 'step_scale', {\r\n                label: 'Step Scale',\r\n                min: 0.01,\r\n                max: 10,\r\n                step: 0.001,\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n\r\n            pane.addBinding(this, 'iterations', {\r\n                label: 'Iterations',\r\n                min: 1,\r\n                max: 5,\r\n                step: 1,\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n\r\n            pane.addBinding(this, 'heightmap_contrast', {\r\n                label: 'Contrast',\r\n                min: 0.1,\r\n                max: 8,\r\n                step: 0.1,\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n\r\n            pane.addBinding(this, 'heightmap_brightness', {\r\n                label: 'Brightness',\r\n                min: 0.1,\r\n                max: 8,\r\n                step: 0.1,\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n\r\n            pane.addBinding(this, 'invert_heightmap', {\r\n                label: 'Invert Heightmap',\r\n            }).on('change', () => {\r\n                this.update()\r\n            })\r\n\r\n            pane.addBinding(this, 'use_directx_format', {\r\n                label: 'DirectX Format',\r\n            }).on('change', ({ value }) => {\r\n                this.update()\r\n            })\r\n\r\n            pane.addBlade({\r\n                view: 'separator',\r\n            });\r\n\r\n\r\n            pane.addButton({\r\n                title: 'Open File',\r\n            }).on('click', () => {\r\n                this.open_file()\r\n            });\r\n\r\n            pane.addBlade({\r\n                view: 'separator',\r\n            });\r\n\r\n\r\n            pane.addButton({\r\n                title: 'Download as Image',\r\n            }).on('click', () => {\r\n                this.preview_mode = false\r\n                this.update()\r\n                setTimeout(() => {\r\n                    this.$refs.shader_view.renderer.save_as_image(this.download_image_name)\r\n                }, 200);\r\n            });\r\n\r\n            pane.addBinding(this, 'download_image_name', {\r\n                label: '',\r\n                readonly: true,\r\n            });\r\n\r\n            pane.addBlade({\r\n                view: 'separator',\r\n            });\r\n\r\n            pane.addBinding(this, 'image_size_formatted', {\r\n                label: 'Image Size',\r\n                readonly: true,\r\n            });\r\n\r\n        },\r\n    },\r\n});\r\n</script>\r\n<style lang=\"less\">\r\n@import url('@/assets/index.less');\r\n\r\n.norm-mapa {\r\n    padding: 0;\r\n    display: grid;\r\n    grid-template-columns: 240px 1fr;\r\n    grid-template-rows: 1fr;\r\n    overflow: hidden;\r\n\r\n    .control-panel {\r\n        padding: 8px;\r\n    }\r\n\r\n    .rendering-area {\r\n        position: relative;\r\n        width: 100%;\r\n        height: 100%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        overflow: hidden;\r\n        padding: 8px;\r\n\r\n        .shader-view {\r\n            width: 100%;\r\n            height: 100%;\r\n        }\r\n    }\r\n\r\n    &.mobile {}\r\n}\r\n\r\n@media screen and (max-width: 600px) {\r\n    .norm-mapa {\r\n        grid-template-rows: 1fr 1fr;\r\n        grid-template-columns: 1fr;\r\n        height: 100%;\r\n\r\n        .control-panel {\r\n            grid-row: 2;\r\n            overflow: auto;\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NormMapa.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NormMapa.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NormMapa.vue?vue&type=template&id=53920e04&\"\nimport script from \"./NormMapa.vue?vue&type=script&lang=js&\"\nexport * from \"./NormMapa.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NormMapa.vue?vue&type=style&index=0&id=53920e04&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["EMimeTypes","render","_vm","this","_c","_self","_setupProxy","staticClass","on","$event","preventDefault","_handle_dragenter","apply","arguments","_handle_dragover","_handle_drop","show_tooltip","_v","_s","message","_e","is_mobile","class","dragging","ref","staticStyle","attrs","mime","_handle_file_input_change","staticRenderFns","mixins","BaseComponent","extend","name","data","props","type","String","default","Any","on_file","Function","on_files","Boolean","methods","_handle_files","files","length","async","event","target","dataTransfer","component","mobile","renderer_width","renderer_height","update","Image","_handle_file_upload","handle_open_file","components","ThreeRenderer","Tweakpane","DragAndDropManager","step_scale","iterations","heightmap_contrast","heightmap_brightness","invert_heightmap","use_directx_format","download_image_name","prev_pointer_position","x","y","grid","texture_offset","THREE","texture_scale","preview_mode","computed","image_size_formatted","image","mounted","init","setup_tweakpane","beforeDestroy","load_texture","set_texture","texture","wrapS","wrapT","width","height","update_route","src","$refs","shader_view","material","uniforms","u_map","value","needsUpdate","u_directx","u_scale","u_invert_height","u_iterations","u_contrast","u_brightness","u_preview","Promise","resolve","reject","get_file_name","loader","load","console","log","open_file","fileInput","click","file","url","URL","createObjectURL","remove_extension","filename","replace","path","split","pop","pane","tweakpane","addButton","title","addBlade","view","addBinding","label","min","max","step","setTimeout","renderer","save_as_image","readonly"],"sourceRoot":""}