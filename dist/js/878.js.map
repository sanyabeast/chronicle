{"version":3,"file":"js/878.js","mappings":"iKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAUF,EAAIG,MAAMC,YAAY,OAAOF,EAAG,MAAM,CAACG,YAAY,qBAAqBC,MAAM,CAAEC,OAAQP,EAAIQ,WAAYC,GAAG,CAAC,UAAYT,EAAIU,iBAAiB,UAAYV,EAAIW,iBAAiB,QAAUX,EAAIY,eAAe,YAAc,SAASC,GAAQA,EAAOC,gBAAiB,EAAE,UAAY,SAASD,GAAgC,OAAxBA,EAAOC,iBAAwBd,EAAIe,iBAAiBC,MAAM,KAAMC,UAAU,EAAE,SAAW,SAASJ,GAAgC,OAAxBA,EAAOC,iBAAwBd,EAAIkB,gBAAgBF,MAAM,KAAMC,UAAU,EAAE,KAAO,SAASJ,GAAgC,OAAxBA,EAAOC,iBAAwBd,EAAImB,YAAYH,MAAM,KAAMC,UAAU,IAAI,CAACf,EAAG,gBAAgB,CAACkB,IAAI,iBAAiBC,MAAM,CAAC,oBAAsBrB,EAAIsB,oBAAoB,eAAiBtB,EAAIuB,WAAW,CAACrB,EAAG,IAAI,CAACG,YAAY,mBAAmBI,GAAG,CAAC,MAAQT,EAAIwB,YAAY,CAACxB,EAAIyB,GAAG,eAAevB,EAAG,MAAM,CAACG,YAAY,cAAcH,EAAG,IAAI,CAACG,YAAY,qBAAqBC,MAAM,CAAEoB,OAAQ1B,EAAI2B,MAAOlB,GAAG,CAAC,MAAQ,SAASI,GAAQb,EAAI2B,MAAQ3B,EAAI2B,IAAI,IAAI,CAAC3B,EAAIyB,GAAG,UAAUvB,EAAG,IAAI,CAACG,YAAY,uBAAuBC,MAAM,CAAEoB,OAAQ1B,EAAI4B,OAAS,GAAIC,SAAS,CAAC,UAAY7B,EAAI8B,GAAG9B,EAAI+B,eAAetB,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOb,EAAIgC,WAAWhC,EAAI4B,OAAS,EAAE,KAAK1B,EAAG,MAAM,CAACG,YAAY,cAAcH,EAAG,IAAI,CAACG,YAAY,cAAcC,MAAM,CAAEoB,OAAqB,IAAb1B,EAAIiC,MAAaxB,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOb,EAAIkC,SAAS,EAAE,IAAI,CAAClC,EAAIyB,GAAG,cAAcvB,EAAG,IAAI,CAACG,YAAY,cAAcC,MAAM,CAAEoB,OAAqB,IAAb1B,EAAIiC,MAAaxB,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOb,EAAIkC,SAAS,EAAE,IAAI,CAAClC,EAAIyB,GAAG,yBAAyBvB,EAAG,IAAI,CAACG,YAAY,cAAcC,MAAM,CAAEoB,OAAqB,IAAb1B,EAAIiC,MAAaxB,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOb,EAAIkC,SAAS,EAAE,IAAI,CAAClC,EAAIyB,GAAG,gBAAgBvB,EAAG,IAAI,CAACG,YAAY,cAAcC,MAAM,CAAEoB,OAAqB,IAAb1B,EAAIiC,MAAaxB,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOb,EAAIkC,SAAS,EAAE,IAAI,CAAClC,EAAIyB,GAAG,yBAAyBvB,EAAG,IAAI,CAACG,YAAY,cAAcC,MAAM,CAAEoB,OAAqB,IAAb1B,EAAIiC,MAAaxB,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOb,EAAIkC,SAAS,EAAE,IAAI,CAAClC,EAAIyB,GAAG,+BAAiCzB,EAAIQ,UAA4JR,EAAImC,KAArJjC,EAAG,MAAM,CAACG,YAAY,cAAcC,MAAM,CAAEiB,SAAUvB,EAAIuB,WAAY,CAAEvB,EAAIuB,SAAUrB,EAAG,IAAI,CAACF,EAAIyB,GAAG,iCAAiCzB,EAAImC,OAAgBjC,EAAG,QAAQ,CAACkB,IAAI,YAAYgB,YAAY,CAAC,QAAU,QAAQf,MAAM,CAAC,KAAO,OAAO,OAAS,WAAWZ,GAAG,CAAC,OAAST,EAAIqC,uBAAwBrC,EAAI2B,KAAMzB,EAAG,MAAM,CAACG,YAAY,QAAQ,CAACH,EAAG,OAAOA,EAAG,SAASF,EAAImC,KAAOnC,EAAIuB,SAA4iDvB,EAAImC,KAAtiDjC,EAAG,MAAM,CAACG,YAAY,QAAQ,CAAGL,EAAIQ,UAAyIR,EAAImC,KAAlIjC,EAAG,IAAI,CAACF,EAAIyB,GAAG,WAAWzB,EAAI8B,GAAG9B,EAAIsC,SAAStC,EAAIuC,eAAeC,EAAG,IAAI,KAAKxC,EAAI8B,GAAG9B,EAAIsC,SAAStC,EAAIuC,eAAeE,EAAG,OAAkBzC,EAAIQ,UAAsIR,EAAImC,KAA/HjC,EAAG,IAAI,CAACF,EAAIyB,GAAG,UAAUzB,EAAI8B,GAAG9B,EAAIsC,SAAStC,EAAI0C,cAAcF,EAAG,IAAI,KAAKxC,EAAI8B,GAAG9B,EAAIsC,SAAStC,EAAI0C,cAAcD,EAAG,OAAkBzC,EAAIQ,UAA+CR,EAAImC,KAAxCjC,EAAG,MAAM,CAACG,YAAY,cAAyBL,EAAIQ,UAA+RR,EAAImC,KAAxRjC,EAAG,IAAI,CAACG,YAAY,gBAAgB,CAACL,EAAIyB,GAAG,wOAAmPzB,EAAIQ,UAA+CR,EAAImC,KAAxCjC,EAAG,MAAM,CAACG,YAAY,cAAyBL,EAAIQ,UAAwmBR,EAAImC,KAAjmBjC,EAAG,IAAI,CAACG,YAAY,gBAAgB,CAACL,EAAIyB,GAAG,eAAevB,EAAG,OAAO,CAACG,YAAY,UAAU,CAACL,EAAIyB,GAAG,YAAYzB,EAAIyB,GAAG,cAAcvB,EAAG,OAAO,CAACG,YAAY,UAAU,CAACL,EAAIyB,GAAG,UAAUzB,EAAIyB,GAAG,mBAAmBvB,EAAG,OAAO,CAACG,YAAY,SAAS,CAACL,EAAIyB,GAAG,WAAWzB,EAAIyB,GAAG,cAAcvB,EAAG,OAAO,CAACG,YAAY,SAAS,CAACL,EAAIyB,GAAG,WAAWzB,EAAIyB,GAAG,uBAAuBvB,EAAG,OAAO,CAACG,YAAY,SAAS,CAACL,EAAIyB,GAAG,WAAWzB,EAAIyB,GAAG,8BAA8BvB,EAAG,OAAO,CAACG,YAAY,SAAS,CAACL,EAAIyB,GAAG,YAAYzB,EAAIyB,GAAG,yBAAyBvB,EAAG,OAAO,CAACG,YAAY,SAAS,CAACL,EAAIyB,GAAG,WAAWzB,EAAIyB,GAAG,YAAsBzB,EAAIQ,UAAWN,EAAG,IAAI,CAACG,YAAY,gBAAgB,CAACL,EAAIyB,GAAG,8GAA8GzB,EAAImC,QAAiB,EAC75H,EACIQ,EAAkB,G,4DCgEtB,MAAAC,EAAA,CACA,0BACA,wBACA,yBACA,4BAgBA,OAAAC,EAAAA,EAAAA,GAAAC,EAAAA,GAAAC,OAAA,CACAC,KAAA,mBACAC,WAAA,CACAC,cAAAA,EAAAA,YAEAC,OACA,OACA5B,UAAA,EACAD,oBAAA,iBACA8B,YAAA,EACAC,sBAAA,CAAAb,EAAA,EAAAC,EAAA,GACAR,KAAA,EACAN,MAAA,EACAY,eAAA,IAAAe,EAAAA,IAAA,KACAZ,cAAA,IAAAY,EAAAA,IAAA,KACA1B,OAAA,EAEA,EACA2B,SAAA,CACA/C,YACA,YAAAgD,OAAAC,MAAAC,gBACA,EACA3B,eACA,YAAAH,QACA,OACA,0BAEA,OACA,0BAEA,OACA,0BAGA,GAEA+B,MAAA,CACAC,MAAA,CACAC,KAAAC,OACAC,QAAA,KAGAC,UACA,KAAAC,OACAC,SAAAC,iBAAA,eAAAC,eACA,EACAC,gBACAH,SAAAI,oBAAA,eAAAF,eACA,EACAG,QAAA,CACA,aACA,IAAAC,EAAA,IAAAlB,EAAAA,IAAA,SAEAmB,QAAAC,EAAAA,EAAAA,IAAAC,EAAAA,GAAAC,oBAEAH,EAAAI,SAAAC,OAAAC,MAAA,KAAA9C,KACAwC,EAAAI,SAAAG,SAAAD,MAAA,KAAAxC,eACAkC,EAAAI,SAAAI,QAAAF,MAAA,KAAArC,cAEA,IAAAwC,EAAA,KAAAA,MAAA,IAAA5B,EAAAA,IAAAkB,EAAAC,GACA,KAAAU,MAAAC,eAAAC,MAAAC,IAAAJ,GAEA,IAAAtB,EAAA,KAAAA,MAEA,WAAAA,IACAA,EAAAhB,EAAA2C,KAAAC,MAAAD,KAAAE,SAAA7C,EAAA8C,UAGA,KAAAC,aAAA/B,EACA,EACA1B,SAAAD,GACA,KAAAA,KAAAA,EACA,KAAAkD,MAAAC,eAAAC,MAAAO,SAAAC,SAAAC,IACAA,EAAAC,oBAAAzC,EAAAA,MACAwC,EAAAC,SAAAlB,SAAAC,OAAAC,MAAA,KAAA9C,KACA,GAEA,EACAT,YACA,KAAA2D,MAAAa,UAAAC,OACA,EACAN,aAAAO,EAAAC,GAEA,OADA,KAAA7E,oBAAA,KAAA8E,iBAAAF,GACA,IAAAG,SAAA,CAAAC,EAAAC,KACA,IAAAC,EAAA,IAAAlD,EAAAA,IACAkD,EAAAC,KAAAP,GAAAQ,IACA,KAAAC,YAAAD,GACAJ,EAAAI,EAAA,GACA,GAEA,EACAE,WAAAV,GACA,WAAAG,SAAA,CAAAC,EAAAC,KACA,IAAA3C,EAAA,IAAAiD,MACAjD,EAAAsC,IAAAA,EACAtC,EAAAkD,OAAA,KACAR,EAAA1C,EAAA,CACA,GAEA,EACAmD,cAAAC,GACA,WAAAX,SAAA,CAAAC,EAAAC,KACA,MAAAU,EAAA,IAAAC,WACAD,EAAAH,OAAA,KACAR,EAAAW,EAAAE,OAAA,EAEAF,EAAAG,cAAAJ,EAAA,GAEA,EACAL,YAAAD,GACA,KAAAW,wBACA,KAAAX,QAAAA,EACA,KAAA1E,WAAA,KAAAJ,QACA8E,EAAAY,aAAA,EACA,KAAApC,MAAAa,SAAAlB,SAAA0C,MAAAxC,MAAA2B,CACA,EACA1E,WAAA+C,GAKA,GAJAA,GAAA,EACA,KAAAnD,OAAAmD,EAGA,KAAA2B,QAAA,CACA,OAAA3B,GACA,OACA,KAAA2B,QAAAc,MAAAlE,EAAAA,IACA,KAAAoD,QAAAe,MAAAnE,EAAAA,IACA,MAEA,OACA,KAAAoD,QAAAc,MAAAlE,EAAAA,IACA,KAAAoD,QAAAe,MAAAnE,EAAAA,IACA,MAEA,OACA,KAAAoD,QAAAc,MAAAlE,EAAAA,IACA,KAAAoD,QAAAe,MAAAnE,EAAAA,IACA,MAIA,KAAAoD,QAAAY,aAAA,CACA,CACA,EACA,0BAAAI,GACA,MAAAV,EAAAU,EAAAC,OAAAC,MAAA,GACA,GAAAZ,EAAA,CACA,MAAAa,QAAA,KAAAd,cAAAC,GACA,IAAApD,QAAA,KAAAgD,WAAAiB,GACA,KAAAvG,oBAAA,KAAA8E,iBAAAY,EAAAhE,MACA,KAAA2D,YAAA,IAAArD,EAAAA,IAAAM,GACA,CACA,EACAjD,iBAAA+G,GACAA,EAAA5G,iBACA,KAAAuC,sBAAAb,EAAAkF,EAAAI,QACA,KAAAzE,sBAAAZ,EAAAiF,EAAAK,QAEA,KAAA3E,WAAAsE,EAAAM,OAEA,SAAA5E,YACA,KAAAiE,uBAEA,EACAA,wBACA,KAAA9E,eAAA0F,IAAA,KACA,KAAAvF,cAAAuF,IAAA,IACA,EACArH,eAAA8G,GACA,KAAAtE,YAAA,CACA,EACA1C,iBAAAgH,GACA,QAAAtE,YAAA,GACA,IAAA8E,EAAAR,EAAAI,QAAA,KAAAzE,sBAAAb,EACA2F,EAAAT,EAAAK,QAAA,KAAA1E,sBAAAZ,EAEA,KAAAY,sBAAAb,EAAAkF,EAAAI,QACA,KAAAzE,sBAAAZ,EAAAiF,EAAAK,QAEA,IAAAK,EAAAF,EAAA,KAAA/C,MAAAC,eAAAiD,MAAA,EACAC,EAAAH,EAAA,KAAAhD,MAAAC,eAAAmD,OAAA,EAEA,YAAAnF,YACA,OACA,KAAAb,eAAAC,GAAA4F,EACA,KAAA7F,eAAAE,GAAA6F,EACA,MAEA,OACA,KAAA5F,cAAAF,GAAA4F,EACA,KAAA1F,cAAAD,GAAA6F,EACA,MAEA,QACA,MAEA,CACA,EACAlE,eAAAsD,GACA,KAAAA,EAAAc,SAAA,KAAAd,EAAAc,SACA,KAAAnB,uBAEA,EAEA,kBAAAK,GACAA,EAAA5G,iBACA,KAAAS,UAAA,EACA,MAAAqG,EAAAF,EAAAe,aAAAb,MACA,GAAAA,EAAAlC,OAAA,GACA,MAAAsB,EAAAY,EAAA,GACAC,QAAA,KAAAd,cAAAC,GACA,IAAApD,QAAA,KAAAgD,WAAAiB,GACA,KAAAvG,oBAAA,KAAA8E,iBAAAY,EAAAhE,MACA,KAAA2D,YAAA,IAAArD,EAAAA,IAAAM,GACA,CACA,EAGA7C,iBAAA2G,GACA,KAAAnG,UAAA,EACAmG,EAAA5G,gBACA,EAGAI,gBAAAwG,GACAA,EAAA5G,gBACA,EACAwB,SAAAoG,EAAAC,GACA,GAAAC,MAAAF,IAAAE,MAAAD,GACA,OAAAE,IAGA,MAAAC,EAAAvD,KAAAwD,IAAA,GAAAJ,GACA,OAAApD,KAAAyD,MAAAN,EAAAI,GAAAA,CACA,EACA1C,iBAAA6C,GACA,qBAAAA,EACA,UAAAC,MAAA,0BAGA,MAAAC,EAAAF,EAAAG,YAAA,KACA,WAAAD,EACAF,EAGAA,EAAAI,MAAA,EAAAF,EACA,KC3UyQ,I,UCQrQG,GAAY,OACd,EACAvJ,EACA4C,GACA,EACA,KACA,KACA,MAIF,EAAe2G,EAAiB,O","sources":["webpack://chronicle/./src/views/applets/PolarPictureTool.vue","webpack://chronicle/src/views/applets/PolarPictureTool.vue","webpack://chronicle/./src/views/applets/PolarPictureTool.vue?b796","webpack://chronicle/./src/views/applets/PolarPictureTool.vue?f45f"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"polar-picture-tool\",class:{ mobile: _vm.is_mobile },on:{\"mousemove\":_vm.handle_mousemove,\"mousedown\":_vm.handle_mousedown,\"mouseup\":_vm.handle_mouseup,\"contextmenu\":function($event){$event.preventDefault();},\"dragenter\":function($event){$event.preventDefault();return _vm.handle_dragenter.apply(null, arguments)},\"dragover\":function($event){$event.preventDefault();return _vm.handle_dragover.apply(null, arguments)},\"drop\":function($event){$event.preventDefault();return _vm.handle_drop.apply(null, arguments)}}},[_c('ThreeRenderer',{ref:\"three_renderer\",attrs:{\"download_image_name\":_vm.download_image_name,\"show_controls\":!_vm.dragging}},[_c('p',{staticClass:\"button open-file\",on:{\"click\":_vm.open_file}},[_vm._v(\"open file\")]),_c('div',{staticClass:\"separator\"}),_c('p',{staticClass:\"button toggle-grid\",class:{ active: _vm.grid },on:{\"click\":function($event){_vm.grid = !_vm.grid}}},[_vm._v(\"grid\")]),_c('p',{staticClass:\"button toggle-tiling\",class:{ active: _vm.tiling > 0 },domProps:{\"innerHTML\":_vm._s(_vm.tiling_label)},on:{\"click\":function($event){return _vm.set_tiling(_vm.tiling + 1)}}}),_c('div',{staticClass:\"separator\"}),_c('p',{staticClass:\"button mode\",class:{ active: _vm.mode === 0 },on:{\"click\":function($event){return _vm.set_mode(0)}}},[_vm._v(\"original\")]),_c('p',{staticClass:\"button mode\",class:{ active: _vm.mode === 1 },on:{\"click\":function($event){return _vm.set_mode(1)}}},[_vm._v(\"polar to carthesian\")]),_c('p',{staticClass:\"button mode\",class:{ active: _vm.mode === 2 },on:{\"click\":function($event){return _vm.set_mode(2)}}},[_vm._v(\"polar flip\")]),_c('p',{staticClass:\"button mode\",class:{ active: _vm.mode === 3 },on:{\"click\":function($event){return _vm.set_mode(3)}}},[_vm._v(\"carthesian to polar\")]),_c('p',{staticClass:\"button mode\",class:{ active: _vm.mode === 4 },on:{\"click\":function($event){return _vm.set_mode(4)}}},[_vm._v(\"carthesian to polar [b]\")])]),(!_vm.is_mobile)?_c('div',{staticClass:\"drop-target\",class:{ dragging: _vm.dragging }},[(_vm.dragging)?_c('p',[_vm._v(\"Drag and drop an image here\")]):_vm._e()]):_vm._e(),_c('input',{ref:\"fileInput\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.handle_image_upload}}),(_vm.grid)?_c('div',{staticClass:\"grid\"},[_c('div'),_c('div')]):_vm._e(),(!_vm.dragging)?_c('div',{staticClass:\"info\"},[(!_vm.is_mobile)?_c('p',[_vm._v(\"offset: \"+_vm._s(_vm.round_to(_vm.texture_offset.x, 4))+\", \"+_vm._s(_vm.round_to(_vm.texture_offset.y, 4)))]):_vm._e(),(!_vm.is_mobile)?_c('p',[_vm._v(\"scale: \"+_vm._s(_vm.round_to(_vm.texture_scale.x, 4))+\", \"+_vm._s(_vm.round_to(_vm.texture_scale.y, 3)))]):_vm._e(),(!_vm.is_mobile)?_c('div',{staticClass:\"separator\"}):_vm._e(),(!_vm.is_mobile)?_c('p',{staticClass:\"instructions\"},[_vm._v(\" This applet allows you to transform the content of an image with radial symmetry into a tileable pattern. You can also do the reverse - wrap a seamless pattern around a circle, turning it into an object with radial symmetry. \")]):_vm._e(),(!_vm.is_mobile)?_c('div',{staticClass:\"separator\"}):_vm._e(),(!_vm.is_mobile)?_c('p',{staticClass:\"instructions\"},[_vm._v(\"Adjust the \"),_c('span',{staticClass:\"offset\"},[_vm._v(\"offset\")]),_vm._v(\" with the \"),_c('span',{staticClass:\"offset\"},[_vm._v(\"left\")]),_vm._v(\" mouse button, \"),_c('span',{staticClass:\"scale\"},[_vm._v(\"scale\")]),_vm._v(\" with the \"),_c('span',{staticClass:\"scale\"},[_vm._v(\"right\")]),_vm._v(\" mouse button, and \"),_c('span',{staticClass:\"reset\"},[_vm._v(\"reset\")]),_vm._v(\" transformations with the \"),_c('span',{staticClass:\"reset\"},[_vm._v(\"middle\")]),_vm._v(\" mouse button or the \"),_c('span',{staticClass:\"reset\"},[_vm._v(\"space\")]),_vm._v(\" key. \")]):_vm._e(),(_vm.is_mobile)?_c('p',{staticClass:\"instructions\"},[_vm._v(\" The applet does not have full functionality support on mobile devices - it's better to switch to a PC. \")]):_vm._e()]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div :class=\"{ mobile: is_mobile }\" class=\"polar-picture-tool\" @mousemove=\"handle_mousemove\"\r\n        @mousedown=\"handle_mousedown\" @mouseup=\"handle_mouseup\" @contextmenu.prevent=\"\"\r\n        @dragenter.prevent=\"handle_dragenter\" @dragover.prevent=\"handle_dragover\" @drop.prevent=\"handle_drop\">\r\n        <ThreeRenderer ref=\"three_renderer\" :download_image_name=\"download_image_name\" :show_controls=\"!dragging\">\r\n            <p class=\"button open-file\" @click=\"open_file\">open file</p>\r\n            <div class=\"separator\"></div>\r\n            <p class=\"button toggle-grid\" :class=\"{ active: grid }\" @click=\"grid = !grid\">grid</p>\r\n            <p class=\"button toggle-tiling\" :class=\"{ active: tiling > 0 }\" @click=\"set_tiling(tiling + 1)\"\r\n                v-html=\"tiling_label\"></p>\r\n            <div class=\"separator\"></div>\r\n            <p class=\"button mode\" :class=\"{ active: mode === 0 }\" @click=\"set_mode(0)\">original</p>\r\n            <p class=\"button mode\" :class=\"{ active: mode === 1 }\" @click=\"set_mode(1)\">polar to carthesian</p>\r\n            <p class=\"button mode\" :class=\"{ active: mode === 2 }\" @click=\"set_mode(2)\">polar flip</p>\r\n            <p class=\"button mode\" :class=\"{ active: mode === 3 }\" @click=\"set_mode(3)\">carthesian to polar</p>\r\n            <p class=\"button mode\" :class=\"{ active: mode === 4 }\" @click=\"set_mode(4)\">carthesian to polar [b]</p>\r\n\r\n        </ThreeRenderer>\r\n        <!-- Add a drop target -->\r\n        <div class=\"drop-target\" v-if=\"!is_mobile\" :class=\"{ dragging: dragging }\">\r\n            <p v-if=\"dragging\">Drag and drop an image here</p>\r\n        </div>\r\n\r\n        <!-- Add file input for drag and drop -->\r\n        <input type=\"file\" accept=\"image/*\" @change=\"handle_image_upload\" style=\"display: none\" ref=\"fileInput\" />\r\n        <div class=\"grid\" v-if=\"grid\">\r\n            <div>\r\n            </div>\r\n            <div>\r\n            </div>\r\n        </div>\r\n        <div class=\"info\" v-if=\"!dragging\">\r\n            <p v-if=\"!is_mobile\">offset: {{ round_to(texture_offset.x, 4) }}, {{ round_to(texture_offset.y, 4) }}</p>\r\n            <p v-if=\"!is_mobile\">scale: {{ round_to(texture_scale.x, 4) }}, {{ round_to(texture_scale.y, 3) }}</p>\r\n            <div v-if=\"!is_mobile\" class=\"separator\"></div>\r\n            <p v-if=\"!is_mobile\" class=\"instructions\">\r\n                This applet allows you to transform the content of an image with radial symmetry into a tileable pattern.\r\n                You can also do the reverse - wrap a seamless pattern around a circle, turning it into an object with radial\r\n                symmetry.\r\n            </p>\r\n            <div v-if=\"!is_mobile\" class=\"separator\"></div>\r\n            <p v-if=\"!is_mobile\" class=\"instructions\">Adjust the <span class=\"offset\">offset</span> with the <span\r\n                    class=\"offset\">left</span>\r\n                mouse button,\r\n                <span class=\"scale\">scale</span> with the\r\n                <span class=\"scale\">right</span> mouse button, and\r\n                <span class=\"reset\">reset</span> transformations\r\n                with the <span class=\"reset\">middle</span> mouse button or the <span class=\"reset\">space</span> key.\r\n            </p>\r\n            <p v-if=\"is_mobile\" class=\"instructions\">\r\n                The applet does not have full functionality support on mobile devices - it's better to switch to a PC.\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <!-- Other components and UI elements -->\r\n</div></template>\r\n  \r\n<script >\r\n\r\nimport * as THREE from 'three';\r\nimport mixins from 'vue-typed-mixins'\r\nimport ThreeRenderer from '../../components/ThreeRenderer.vue';\r\nimport BaseComponent from '@/components/BaseComponent.vue';\r\nimport { load_texture, read_text_file, create_shader_material } from '@/tools';\r\nimport { shaders } from '@/router/index'\r\n\r\nconst samples = [\r\n    'assets/image/planet.png',\r\n    'assets/image/moon.png',\r\n    'assets/image/clock.png',\r\n    'assets/image/pattern.png',\r\n]\r\n\r\n// export interface IPolarPictureToolData {\r\n//     dragging: boolean;\r\n//     download_image_name: string;\r\n//     mouse_mode: number;\r\n//     prev_pointer_position: { x: number, y: number };\r\n//     mode: number;\r\n//     grid: boolean;\r\n//     texture_offset: THREE.Vector2;\r\n//     texture_scale: THREE.Vector2;\r\n//     tiling: number;\r\n\r\n// }\r\n\r\nexport default mixins(BaseComponent).extend({\r\n    name: 'PolarPictureTool',\r\n    components: {\r\n        ThreeRenderer,\r\n    },\r\n    data() {\r\n        return {\r\n            dragging: false,\r\n            download_image_name: 'rendered_frame',\r\n            mouse_mode: -1,\r\n            prev_pointer_position: { x: 0, y: 0 },\r\n            mode: 1,\r\n            grid: true,\r\n            texture_offset: new THREE.Vector2(0, 0),\r\n            texture_scale: new THREE.Vector2(1, 1),\r\n            tiling: 2\r\n        };\r\n    },\r\n    computed: {\r\n        is_mobile() {\r\n            return this.$store.state.is_mobile_device;\r\n        },\r\n        tiling_label() {\r\n            switch (this.tiling) {\r\n                case 0: {\r\n                    return 'tiling [disabled]';\r\n                }\r\n                case 1: {\r\n                    return 'tiling [repeated]';\r\n                }\r\n                case 2: {\r\n                    return 'tiling [mirrored]';\r\n                }\r\n            }\r\n        }\r\n    },\r\n    props: {\r\n        image: {\r\n            type: String,\r\n            default: '',\r\n        },\r\n    },\r\n    mounted() {\r\n        this.init()\r\n        document.addEventListener('keydown', this.handle_keydown);\r\n    },\r\n    beforeDestroy() {\r\n        document.removeEventListener('keydown', this.handle_keydown);\r\n    },\r\n    methods: {\r\n        async init() {\r\n            let plane_geometry = new THREE.PlaneGeometry(1, 1, 1, 1);\r\n            \r\n            let plane_material = await create_shader_material(shaders.polar_picture_tool);\r\n\r\n            plane_material.uniforms.u_mode.value = this.mode;\r\n            plane_material.uniforms.u_offset.value = this.texture_offset;\r\n            plane_material.uniforms.u_scale.value = this.texture_scale;\r\n\r\n            let plane = this.plane = new THREE.Mesh(plane_geometry, plane_material);\r\n            this.$refs.three_renderer.scene.add(plane);\r\n\r\n            let image = this.image\r\n\r\n            if (image === 'random') {\r\n                image = samples[Math.floor(Math.random() * samples.length)]\r\n            }\r\n\r\n            this.load_texture(image)\r\n        },\r\n        set_mode(mode) {\r\n            this.mode = mode;\r\n            this.$refs.three_renderer.scene.children.forEach((child) => {\r\n                if (child.material instanceof THREE.ShaderMaterial) {\r\n                    child.material.uniforms.u_mode.value = this.mode;\r\n                }\r\n            });\r\n        },\r\n        open_file() {\r\n            this.$refs.fileInput.click();\r\n        },\r\n        load_texture(src, on_load) {\r\n            this.download_image_name = this.remove_extension(src)\r\n            return new Promise((resolve, reject) => {\r\n                let loader = new THREE.TextureLoader();\r\n                loader.load(src, (texture) => {\r\n                    this.set_texture(texture)\r\n                    resolve(texture);\r\n                });\r\n            })\r\n        },\r\n        load_image(src) {\r\n            return new Promise((resolve, reject) => {\r\n                let image = new Image();\r\n                image.src = src;\r\n                image.onload = () => {\r\n                    resolve(image);\r\n                };\r\n            });\r\n        },\r\n        get_image_src(file) {\r\n            return new Promise((resolve, reject) => {\r\n                const reader = new FileReader();\r\n                reader.onload = () => {\r\n                    resolve(reader.result);\r\n                };\r\n                reader.readAsDataURL(file);\r\n            });\r\n        },\r\n        set_texture(texture) {\r\n            this.reset_transformations()\r\n            this.texture = texture\r\n            this.set_tiling(this.tiling)\r\n            texture.needsUpdate = true\r\n            this.plane.material.uniforms.u_map.value = texture;\r\n        },\r\n        set_tiling(value) {\r\n            value = value % 3\r\n            this.tiling = value\r\n\r\n\r\n            if (this.texture) {\r\n                switch (value) {\r\n                    case 0: {\r\n                        this.texture.wrapS = THREE.ClampToEdgeWrapping\r\n                        this.texture.wrapT = THREE.ClampToEdgeWrapping\r\n                        break;\r\n                    }\r\n                    case 1: {\r\n                        this.texture.wrapS = THREE.RepeatWrapping\r\n                        this.texture.wrapT = THREE.RepeatWrapping\r\n                        break;\r\n                    }\r\n                    case 2: {\r\n                        this.texture.wrapS = THREE.MirroredRepeatWrapping\r\n                        this.texture.wrapT = THREE.MirroredRepeatWrapping\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                this.texture.needsUpdate = true\r\n            }\r\n        },\r\n        async handle_image_upload(event) {\r\n            const file = event.target.files[0];\r\n            if (file) {\r\n                const image_src = await this.get_image_src(file);\r\n                let image = await this.load_image(image_src);\r\n                this.download_image_name = this.remove_extension(file.name)\r\n                this.set_texture(new THREE.Texture(image))\r\n            }\r\n        },\r\n        handle_mousedown(event) {\r\n            event.preventDefault()\r\n            this.prev_pointer_position.x = event.clientX\r\n            this.prev_pointer_position.y = event.clientY\r\n\r\n            this.mouse_mode = event.button\r\n\r\n            if (this.mouse_mode === 1) {\r\n                this.reset_transformations()\r\n            }\r\n        },\r\n        reset_transformations() {\r\n            this.texture_offset.set(0, 0)\r\n            this.texture_scale.set(1, 1)\r\n        },\r\n        handle_mouseup(event) {\r\n            this.mouse_mode = -1\r\n        },\r\n        handle_mousemove(event) {\r\n            if (this.mouse_mode > -1) {\r\n                let delta_x = event.clientX - this.prev_pointer_position.x\r\n                let delta_y = event.clientY - this.prev_pointer_position.y\r\n\r\n                this.prev_pointer_position.x = event.clientX\r\n                this.prev_pointer_position.y = event.clientY\r\n\r\n                let dx = delta_x / this.$refs.three_renderer.width / 4\r\n                let dy = delta_y / this.$refs.three_renderer.height / 4\r\n\r\n                switch (this.mouse_mode) {\r\n                    case 0: {\r\n                        this.texture_offset.x += dx\r\n                        this.texture_offset.y -= dy // Invert the y axis\r\n                        break;\r\n                    }\r\n                    case 2: {\r\n                        this.texture_scale.x += dx\r\n                        this.texture_scale.y -= dy // Invert the y axis\r\n                        break;\r\n                    }\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        },\r\n        handle_keydown(event) {\r\n            if (event.keyCode === 27 || event.keyCode === 32) {\r\n                this.reset_transformations()\r\n            }\r\n        },\r\n        // New method to handle dropped files\r\n        async handle_drop(event) {\r\n            event.preventDefault();\r\n            this.dragging = false;\r\n            const files = event.dataTransfer.files;\r\n            if (files.length > 0) {\r\n                const file = files[0]; // Assuming you only handle one file\r\n                const image_src = await this.get_image_src(file);\r\n                let image = await this.load_image(image_src);\r\n                this.download_image_name = this.remove_extension(file.name)\r\n                this.set_texture(new THREE.Texture(image))\r\n            }\r\n        },\r\n\r\n        // New method to handle dragenter event\r\n        handle_dragenter(event) {\r\n            this.dragging = true;\r\n            event.preventDefault();\r\n        },\r\n\r\n        // New method to handle dragover event\r\n        handle_dragover(event) {\r\n            event.preventDefault();\r\n        },\r\n        round_to(number, decimalPlaces) {\r\n            if (isNaN(number) || isNaN(decimalPlaces)) {\r\n                return NaN; // Return NaN if either the number or decimalPlaces is not a number\r\n            }\r\n\r\n            const multiplier = Math.pow(10, decimalPlaces);\r\n            return Math.round(number * multiplier) / multiplier;\r\n        },\r\n        remove_extension(file_name) {\r\n            if (typeof file_name !== 'string') {\r\n                throw new Error('Input must be a string');\r\n            }\r\n\r\n            const last_dot_index = file_name.lastIndexOf('.');\r\n            if (last_dot_index === -1) {\r\n                return file_name; // No file extension found\r\n            }\r\n\r\n            return file_name.slice(0, last_dot_index);\r\n        }\r\n    },\r\n});\r\n</script>\r\n<style lang=\"less\">\r\n.polar-picture-tool {\r\n    padding: 0;\r\n\r\n    .drop-target {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        background-color: rgba(0, 0, 0, 0.2);\r\n        width: 100%;\r\n        height: 100%;\r\n        position: absolute;\r\n        box-sizing: border-box;\r\n        top: 0;\r\n        left: 0;\r\n        z-index: 1;\r\n        cursor: pointer;\r\n        z-index: 2;\r\n\r\n        transition: all 0.2s ease-in-out;\r\n\r\n        &:after {\r\n            content: \"\";\r\n            position: absolute;\r\n            opacity: 0;\r\n            top: 32px;\r\n            left: 32px;\r\n            transition: all 0.2s ease-in-out;\r\n            border-radius: 16px;\r\n            width: calc(100% - 64px);\r\n            height: calc(100% - 64px);\r\n            background-color: black;\r\n            border: 2px dotted #fff;\r\n        }\r\n\r\n        &.dragging {\r\n            &:after {\r\n                opacity: 0.4;\r\n                transition: all 0.2s ease-in-out;\r\n            }\r\n        }\r\n\r\n        p {\r\n            font-size: 20px;\r\n            color: white;\r\n            z-index: 1;\r\n        }\r\n    }\r\n\r\n    .renderer_container {\r\n        width: 100%;\r\n        height: 100%;\r\n\r\n        .controls {\r\n            .separator {\r\n                height: 16px;\r\n                border-bottom: 1px solid #fff;\r\n            }\r\n\r\n            .button {\r\n                box-sizing: border-box;\r\n\r\n                &.open-file {\r\n                    font-size: 24px;\r\n                }\r\n\r\n                &.toggle-grid,\r\n                &.toggle-tiling {\r\n                    &.active {\r\n                        color: red;\r\n                    }\r\n                }\r\n\r\n                &.mode {\r\n                    color: #555;\r\n\r\n                    &.active {\r\n                        color: #fff;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .info {\r\n        position: absolute;\r\n        top: 16px;\r\n        left: 16px;\r\n        width: 256px;\r\n\r\n        .separator {\r\n            height: 16px;\r\n        }\r\n\r\n        p {\r\n            margin: 0;\r\n            font-size: 12px;\r\n\r\n            width: auto;\r\n            display: table;\r\n            background-color: #00000040;\r\n\r\n            &.instructions {\r\n                display: inline;\r\n                color: #d7d7d7;\r\n                opacity: 0;\r\n\r\n                span {\r\n                    color: #fff;\r\n                    font-weight: 800;\r\n\r\n                    &.offset {\r\n                        color: cyan;\r\n                    }\r\n\r\n                    &.scale {\r\n                        color: yellow;\r\n                    }\r\n\r\n                    &.reset {\r\n                        color: magenta;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        &:hover {\r\n            p.instructions {\r\n                opacity: 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    .grid {\r\n        overflow: hidden;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        box-sizing: border-box;\r\n\r\n        div:nth-child(1) {\r\n            position: absolute;\r\n            border-top: 1px dashed #eeeeee51;\r\n            top: 50%;\r\n            width: 100%;\r\n        }\r\n\r\n        div:nth-child(2) {\r\n            position: absolute;\r\n            border-left: 1px dashed #eeeeee51;\r\n            left: 50%;\r\n            height: 100%;\r\n        }\r\n    }\r\n\r\n    &.mobile {\r\n        .info {\r\n\r\n            .instructions {\r\n                background-color: #0000009a;\r\n                opacity: 1;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PolarPictureTool.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PolarPictureTool.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolarPictureTool.vue?vue&type=template&id=43a265ff&\"\nimport script from \"./PolarPictureTool.vue?vue&type=script&lang=js&\"\nexport * from \"./PolarPictureTool.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PolarPictureTool.vue?vue&type=style&index=0&id=43a265ff&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","_setupProxy","staticClass","class","mobile","is_mobile","on","handle_mousemove","handle_mousedown","handle_mouseup","$event","preventDefault","handle_dragenter","apply","arguments","handle_dragover","handle_drop","ref","attrs","download_image_name","dragging","open_file","_v","active","grid","tiling","domProps","_s","tiling_label","set_tiling","mode","set_mode","_e","staticStyle","handle_image_upload","round_to","texture_offset","x","y","texture_scale","staticRenderFns","samples","mixins","BaseComponent","extend","name","components","ThreeRenderer","data","mouse_mode","prev_pointer_position","THREE","computed","$store","state","is_mobile_device","props","image","type","String","default","mounted","init","document","addEventListener","handle_keydown","beforeDestroy","removeEventListener","methods","plane_geometry","plane_material","create_shader_material","shaders","polar_picture_tool","uniforms","u_mode","value","u_offset","u_scale","plane","$refs","three_renderer","scene","add","Math","floor","random","length","load_texture","children","forEach","child","material","fileInput","click","src","on_load","remove_extension","Promise","resolve","reject","loader","load","texture","set_texture","load_image","Image","onload","get_image_src","file","reader","FileReader","result","readAsDataURL","reset_transformations","needsUpdate","u_map","wrapS","wrapT","event","target","files","image_src","clientX","clientY","button","set","delta_x","delta_y","dx","width","dy","height","keyCode","dataTransfer","number","decimalPlaces","isNaN","NaN","multiplier","pow","round","file_name","Error","last_dot_index","lastIndexOf","slice","component"],"sourceRoot":""}