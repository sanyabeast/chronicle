{"version":3,"file":"js/559.js","mappings":"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","sources":["webpack://chronicle/./src/components/DragAndDropManager.vue","webpack://chronicle/./src/components/DragAndDropManager.vue?669d","webpack://chronicle/./src/components/DragAndDropManager.vue?2a08","webpack://chronicle/./src/components/DragAndDropManager.vue?905e","webpack://chronicle/./src/views/applets/RetroidMaker.vue","webpack://chronicle/./src/views/applets/RetroidMaker.vue?3fed","webpack://chronicle/./src/views/applets/RetroidMaker.vue?a641","webpack://chronicle/./src/views/applets/RetroidMaker.vue?2fbc"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"drag-and-drop-manager\",on:{\"dragenter\":function($event){$event.preventDefault();return _vm._handle_dragenter.apply(null, arguments)},\"dragover\":function($event){$event.preventDefault();return _vm._handle_dragover.apply(null, arguments)},\"drop\":function($event){$event.preventDefault();return _vm._handle_drop.apply(null, arguments)}}},[(_vm.show_tooltip)?_c('p',{staticClass:\"drag-and-drop-tooltop\"},[_vm._v(_vm._s(_vm.message))]):_vm._e(),(!_vm.is_mobile)?_c('div',{staticClass:\"drop-target\",class:{ dragging: _vm.dragging }},[(_vm.dragging)?_c('p',[_vm._v(_vm._s(_vm.message))]):_vm._e()]):_vm._e(),_c('input',{ref:\"fileInput\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":_vm.mime},on:{\"change\":_vm._handle_file_input_change}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n\r\nimport mixins from 'vue-typed-mixins';\r\nimport BaseComponent from './BaseComponent.vue';\r\n\r\nexport enum EMimeTypes {\r\n    Image = \"image/*\",\r\n    Video = \"video/*\",\r\n    Audio = \"audio/*\",\r\n    Text = \"text/*\",\r\n    Application = \"application/*\",\r\n    GltfGlb = \"model/gltf-binary\",\r\n    Any = \"*/*\",\r\n}\r\n\r\nexport default mixins(BaseComponent).extend({\r\n    name: 'DragAndDropManager',\r\n    data() {\r\n        return {\r\n            dragging: false,\r\n        }\r\n    },\r\n    props: {\r\n        mime: {\r\n            type: String,\r\n            default: EMimeTypes.Any\r\n        },\r\n        message: {\r\n            type: String,\r\n            default: \"Drag and drop an files here\"\r\n        },\r\n        on_file: Function,\r\n        on_files: Function,\r\n        show_tooltip: {\r\n            type: Boolean,\r\n            default: true\r\n        }\r\n\r\n    },\r\n    mounted() {\r\n        this._handle_paste = this._handle_paste.bind(this);\r\n        document.addEventListener('paste', this._handle_paste);\r\n    },\r\n    beforeDestroy() {\r\n        document.removeEventListener('paste', this._handle_paste);\r\n    },\r\n    methods: {\r\n        _handle_files(files: File[]) {\r\n            if (files.length > 0) {\r\n                if (this.on_file) {\r\n                    this.on_file(files[0]);\r\n                }\r\n                if (this.on_files) {\r\n                    this.on_files(files);\r\n                }\r\n            }\r\n        },\r\n        async _handle_file_input_change(event) {\r\n            this._handle_files(event.target.files);\r\n\r\n        },\r\n        async _handle_drop(event) {\r\n            event.preventDefault();\r\n            this.dragging = false;\r\n            this._handle_files(event.dataTransfer.files)\r\n        },\r\n        _handle_paste(event) {\r\n            let items = (event.clipboardData).items;\r\n            for (let index in items) {\r\n                let item = items[index];\r\n                \r\n                if (item.kind === 'file') {\r\n                    let blob = item.getAsFile();\r\n                    this.on_file(blob)\r\n                }\r\n            }\r\n        },\r\n        // New method to handle dragenter event\r\n        _handle_dragenter(event) {\r\n            this.dragging = true;\r\n            event.preventDefault();\r\n        },\r\n\r\n        // New method to handle dragover event\r\n        _handle_dragover(event) {\r\n            event.preventDefault();\r\n        }\r\n\r\n    }\r\n});\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DragAndDropManager.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DragAndDropManager.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DragAndDropManager.vue?vue&type=template&id=9506712e&\"\nimport script from \"./DragAndDropManager.vue?vue&type=script&lang=ts&\"\nexport * from \"./DragAndDropManager.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DragAndDropManager.vue?vue&type=style&index=0&id=9506712e&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"retroid-maker\"},[_c('ShaderView',{ref:\"shader_view\",attrs:{\"force_width\":_vm.renderer_width,\"force_height\":_vm.renderer_height,\"shader_id\":\"retroid_maker\"}}),_c('DragAndDropManager',{attrs:{\"mime\":_vm.EMimeTypes.Image,\"on_file\":_vm._handle_file_upload}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\nimport DragAndDropManager, { EMimeTypes } from '@/components/DragAndDropManager.vue';\r\nimport { load_texture } from '@/tools';\r\nimport Vue from 'vue';\r\n\r\n\r\nexport default Vue.extend({\r\n    name: \"RetroidMaker\",\r\n    components: { DragAndDropManager },\r\n    computed: {},\r\n    props: {},\r\n    data() {\r\n        return {\r\n            EMimeTypes,\r\n            renderer_width: 0,\r\n            renderer_height: 0,\r\n        }\r\n    },\r\n    mounted() { },\r\n    beforeMount() { },\r\n    methods: {\r\n        async _handle_file_upload(file: File) {\r\n            let url = URL.createObjectURL(file);\r\n            let texture = await load_texture(url);\r\n\r\n            this.$refs.shader_view.material.uniforms.u_map.value = texture;\r\n            this.$refs.shader_view.material.uniforms.u_map.needsUpdate = true;\r\n\r\n            this.renderer_width = texture.image.width;\r\n            this.renderer_height = texture.image.height;\r\n\r\n            console.log(\"material\", this.$refs.shader_view.material);\r\n\r\n            console.log(\"file\", file, texture);\r\n        }\r\n    },\r\n\r\n\r\n\r\n})\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RetroidMaker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RetroidMaker.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./RetroidMaker.vue?vue&type=template&id=50723512&\"\nimport script from \"./RetroidMaker.vue?vue&type=script&lang=ts&\"\nexport * from \"./RetroidMaker.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./RetroidMaker.vue?vue&type=style&index=0&id=50723512&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["EMimeTypes","render","_vm","this","_c","_self","_setupProxy","staticClass","on","$event","preventDefault","_handle_dragenter","apply","arguments","_handle_dragover","_handle_drop","show_tooltip","_v","_s","message","_e","is_mobile","class","dragging","ref","staticStyle","attrs","mime","_handle_file_input_change","staticRenderFns","mixins","BaseComponent","extend","name","data","props","type","String","default","Any","on_file","Function","on_files","Boolean","mounted","_handle_paste","bind","document","addEventListener","beforeDestroy","removeEventListener","methods","_handle_files","files","length","async","event","target","dataTransfer","items","clipboardData","index","item","kind","blob","getAsFile","component","renderer_width","renderer_height","Image","_handle_file_upload","Vue","components","DragAndDropManager","computed","beforeMount","file","url","URL","createObjectURL","texture","load_texture","$refs","shader_view","material","uniforms","u_map","value","needsUpdate","image","width","height","console","log"],"sourceRoot":""}