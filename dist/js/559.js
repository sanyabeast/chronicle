"use strict";(self["webpackChunkchronicle"]=self["webpackChunkchronicle"]||[]).push([[559,637],{9637:function(e,t,n){n.r(t),n.d(t,{EMimeTypes:function(){return a},default:function(){return p}});var a,r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"drag-and-drop-manager",on:{dragenter:function(t){return t.preventDefault(),e._handle_dragenter.apply(null,arguments)},dragover:function(t){return t.preventDefault(),e._handle_dragover.apply(null,arguments)},drop:function(t){return t.preventDefault(),e._handle_drop.apply(null,arguments)}}},[e.show_tooltip?t("p",{staticClass:"drag-and-drop-tooltop"},[e._v(e._s(e.message))]):e._e(),e.is_mobile?e._e():t("div",{staticClass:"drop-target",class:{dragging:e.dragging}},[e.dragging?t("p",[e._v(e._s(e.message))]):e._e()]),t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:e.mime},on:{change:e._handle_file_input_change}})])},i=[],l=n(7581),s=n(4026);(function(e){e["Image"]="image/*",e["Video"]="video/*",e["Audio"]="audio/*",e["Text"]="text/*",e["Application"]="application/*",e["GltfGlb"]="model/gltf-binary",e["Any"]="*/*"})(a||(a={}));var d=(0,l.Z)(s.Z).extend({name:"DragAndDropManager",data(){return{dragging:!1}},props:{mime:{type:String,default:a.Any},message:{type:String,default:"Drag and drop an files here"},on_file:Function,on_files:Function,show_tooltip:{type:Boolean,default:!0}},mounted(){this._handle_paste=this._handle_paste.bind(this),document.addEventListener("paste",this._handle_paste)},beforeDestroy(){document.removeEventListener("paste",this._handle_paste)},methods:{_handle_files(e){e.length>0&&(this.on_file&&this.on_file(e[0]),this.on_files&&this.on_files(e))},async _handle_file_input_change(e){this._handle_files(e.target.files)},async _handle_drop(e){e.preventDefault(),this.dragging=!1,this._handle_files(e.dataTransfer.files)},_handle_paste(e){let t=e.clipboardData.items;for(let n in t){let e=t[n];if("file"===e.kind){let t=e.getAsFile();this.on_file(t)}}},_handle_dragenter(e){this.dragging=!0,e.preventDefault()},_handle_dragover(e){e.preventDefault()}}}),o=d,_=n(1001),h=(0,_.Z)(o,r,i,!1,null,null,null),p=h.exports},9559:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"retroid-maker"},[t("ShaderView",{ref:"shader_view",attrs:{force_width:e.renderer_width,force_height:e.renderer_height,shader_id:"retroid_maker"}}),t("DragAndDropManager",{attrs:{mime:e.EMimeTypes.Image,on_file:e._handle_file_upload}})],1)},r=[],i=(n(2062),n(9637)),l=n(3889),s=n(6369),d=s.ZP.extend({name:"RetroidMaker",components:{DragAndDropManager:i["default"]},computed:{},props:{},data(){return{EMimeTypes:i.EMimeTypes,renderer_width:0,renderer_height:0}},mounted(){},beforeMount(){},methods:{async _handle_file_upload(e){let t=URL.createObjectURL(e),n=await(0,l.br)(t);this.$refs.shader_view.material.uniforms.u_map.value=n,this.$refs.shader_view.material.uniforms.u_map.needsUpdate=!0,this.renderer_width=n.image.width,this.renderer_height=n.image.height,console.log("material",this.$refs.shader_view.material),console.log("file",e,n)}}}),o=d,_=n(1001),h=(0,_.Z)(o,a,r,!1,null,null,null),p=h.exports}}]);
//# sourceMappingURL=559.js.map